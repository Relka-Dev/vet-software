{% extends "base.html" %}
{% block title %}
    Dashboard - Vet Software
{% endblock title %}
{% block content %}
    <div class="p-6">
        <div class="flex items-center mb-6">
            <h1 class="text-4xl font-bold">Dashboard</h1>
            <div class="ml-10">
                <select id="yearSelector"
                        class="block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                        onchange="changeYear(this.value)">
                    <option value="2026" {% if current_year == 2026 %}selected{% endif %}>2026</option>
                    <option value="2025" {% if current_year == 2025 %}selected{% endif %}>2025</option>
                </select>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-stretch">
            <div>{% include "dashboard/includes/vet_utilization.html" %}</div>
            <div>{% include "dashboard/includes/room_utilization.html" %}</div>
            <div class="md:col-span-2">{% include "dashboard/includes/appointments_card.html" %}</div>
        </div>
    </div>
    <!-- Main Dashboard Script -->
    <script>
        function changeYear(year) {
            window.location.href = '/dashboard/' + year + '/';
        }

        window.addEventListener('load', function() {
            initAppointmentsChart();
            initRoomChart();
            initVetChart();
        });
    </script>
{% endblock content %}
